<div class="header-area bg-body-light">
    <div class="filter-container">
        <div class="content content-full">
            <div class="row push">
                <div class="col-md-2">
                    <ng-template *ngIf="filterTemplate" [ngTemplateOutlet]="filterTemplate"></ng-template>
                </div>

                <div class="col-md-6">
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <button type="button" class="btn btn-primary">
                                <i class="fa fa-search mr-2"></i>Quick Search
                            </button>
                        </div>
                        <input type="text" class="form-control" (keyup)="onKeyUp()" (blur)="applySystem()"
                            [(ngModel)]="gloabalSearchModel" placeholder="Keyword">
                    </div>
                </div>

                <div class="col-md-3 offset-1">
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text">
                                <i class="fa fa-columns mr-2"></i>
                                Displayed Columns
                            </span>
                        </div>
                        <ng-select class="ng-select-displayedcolumns" bindLabel="name"
                            placeholder="Columns : {{ columnActive }}" [items]="columns" [closeOnSelect]="false"
                            (change)="resetColumnDrop" [searchable]="false" [clearable]="false">

                            <ng-template ng-header-tmp>
                                <div class="row ml-1 mr-1">
                                    <button type="button"
                                        class="col-12 btn btn-sm btn-secondary mr-2 pl-2 pr-2 pt-1 pb-1"
                                        (click)="resetDefaultColumns()">
                                        <i class="fa fa-fw fa-redo-alt mr-1"></i>Reset
                                    </button>
                                </div>
                            </ng-template>

                            <!--Content in the top container-->
                            <ng-template ng-label-tmp>
                                <div>Selected : {{ columnActive }}</div>
                            </ng-template>
                            <!--List of columns (underline if selected)-->
                            <ng-template ng-option-tmp let-item="item" let-index="index">
                                <div (click)="toggleColumn(item)">
                                    <span *ngIf="item.active" class="text-primary-dark bold">
                                        <i class="ml-1 fa fa-check-circle text-primary-dark"></i>
                                        {{item.displayName}}
                                    </span>
                                    <span *ngIf="!item.active">{{item.displayName}}</span>
                                </div>
                            </ng-template>

                        </ng-select>
                    </div>
                </div>

            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="block block-rounded block-bordered" (mouseenter)="filterSectionMouseOver = true"
                        (mouseleave)="filterSectionMouseOver = false">
                        <div class="block-header block-header-default">
                            <h3 class="block-title">
                                <i class="fa fa-filter mr-1"></i>
                                Columns <small>filtering</small>
                                <!-- NOT WORKING RIGHT NOW -->
                                <span class="nav-main-link-badge badge badge-pill badge-success ml-2">
                                    {{ activeFilters.length }}
                                </span>
                            </h3>
                            <div class="block-options">
                                <button *ngIf="filterSectionMouseOver" type="button"
                                    class="btn-block-option btn-sm custom-btn-danger mr-2 pl-2 pr-2 pt-1 pb-1">
                                    <i class="fa fa-fw fa-times mr-1"></i>Clear all
                                </button>
                                <button type="button" class="btn-block-option"
                                    (click)="filterSectionToggle = !filterSectionToggle">
                                    <i class="si" [ngClass]="filterSectionToggle ? 'si-arrow-up' : 'si-arrow-down'"></i>
                                </button>
                            </div>
                        </div>
                        <div *ngIf="filterSectionToggle" class="block-content"
                            style="padding: 0.75rem 0.75rem 0.25rem;">
                            <div class="row">
                                <div class="col-md-2">
                                    <ng-select class="column-selector mr-2" bindLabel="name" placeholder="Add Filters"
                                        [items]="searchableColumns" [closeOnSelect]="false" [searchable]="true"
                                        [clearable]="false">
                                        <!--Content in the top container-->
                                        <ng-template ng-label-tmp>
                                            <div>Add Filters</div>
                                        </ng-template>
                                        <!--List of filters (underline if selected)-->
                                        <ng-template ng-option-tmp let-item="item" let-index="index">
                                            <div (click)="addFilter(item)">
                                                <span *ngIf="item.filterDisplayed; else elseTemplate"
                                                    class="text-primary-dark bold">
                                                    <i class="ml-1 fa fa-check-circle text-primary-dark"></i>
                                                    {{item.displayName}}
                                                </span>
                                                <ng-template #elseTemplate>{{item.displayName}}</ng-template>
                                            </div>
                                        </ng-template>
                                    </ng-select>
                                </div>
                                <div class="col-md-10">
                                    <div class="filter-list form-inline mb-2">
                                        <!--Distinct filters-->
                                        <ng-template ngFor let-column [ngForOf]="columns">
                                            <app-filter *ngIf="column.filterDisplayed" class="filter-drop" [column]="column"
                                                [servlet]="servlet" (applyFilterOutput)=applySystem()
                                                (remove)="removeFilter($event)">
                                            </app-filter>
                                        </ng-template>
                                        <!--Like filters--><!-- TODO : remove-->
                                        <!-- <ng-template ngFor let-column [ngForOf]="columns">
                                            <app-filterlike *ngIf="column.fieldActive" [column]="column"
                                                (applyFilterOutput)=applySystem() (remove)="removeFilter($event)">
                                            </app-filterlike>
                                        </ng-template> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
        </div>
    </div>
</div>