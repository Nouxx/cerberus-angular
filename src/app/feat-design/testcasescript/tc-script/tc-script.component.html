<div class="block block-rounded block-bordered" *ngIf="testcase">

  <div class="block-header block-header-default">
    <h3 class="block-title">Testcase <small>script</small></h3>
    <div class="block-options">
      <button type="button" class="btn-block-option" data-toggle="block-option" data-action="fullscreen_toggle"><i
          class="si si-size-fullscreen"></i></button>
      <button type="button" class="btn-block-option" data-toggle="block-option" data-action="state_toggle"
        data-action-mode="demo">
        <i class="si si-refresh"></i>
      </button>
    </div>
  </div>

  <div class="block-content">
    <!-- TABS -->
    <ul class="nav nav-tabs nav-tabs-alt js-tabs-enabled" data-toggle="tabs" role="tablist">
      <li *ngFor="let tab of tabs" class="nav-item">
        <a class="nav-link" [ngClass]="selectedTab == tab ? 'active show' : ''" (click)="selectedTab = tab">{{tab}}</a>
      </li>
    </ul>
    <div class="block-content tab-content">

      <!-- SCRIPT TAB -->
      <div *ngIf="selectedTab == tabs[0]" class="tab-pane active show" id="scriptTab" role="tabpanel">

        <!-- SCRIPT CONTENT -->

        <div class="row">

          <!-- STEP LIST -->
          <div class="col-md-6">
            <app-script [testcase]="testcase"></app-script>
          </div>
          <!-- END STEP LIST -->
          <!-- SETTINGS TOOLBAR -->
          <div class="col-md-6">
            <app-settings></app-settings>
          </div>
          <!-- END SETTINGS TOOLBAR -->
        </div>
        <!-- END SCRIPT CONTENT -->
      </div>
      <!-- END SCRIPT TAB -->

      <!-- PROPERTIES TAB -->
      <div *ngIf="selectedTab == tabs[1]" class="tab-pane active show" id="propertiesTab" role="tabpanel">
        <!-- PROPERTIES CONTENT -->
        <div class="row">
          <div class="col-md-12" *ngIf="!oldVersion">
          <app-property-v2 [properties]="propertiesList" [testcase]="testcase"></app-property-v2>
          </div>
          <ng-template [ngIf]="oldVersion">
            <!-- PROPERTY LIST -->
          <div class="col-md-4">
              <ul *ngIf="propertiesList" class="list-group push">
                <li *ngFor="let property of propertiesList | uniqueproplist" class="list-group-item"
                  [ngClass]="property.property_id == activePropertyId ? 'active' : ''"
                  (click)="setActiveProperty(property.property_id)">
                  {{ property.property ? property.property : 'Property Name' }} (id: {{ property.property_id }})
                  <button class="btn-block-option" name="deleteProp" type="button" style="float: right;"
                    (click)="removePropertiesById(property.property_id)">
                    <i class="far fa-fw fa-trash-alt"
                      [ngClass]="property.property_id == activePropertyId ? 'white' : ''"></i>
                  </button>
                </li>
              </ul>
              <button type="button" class="btn btn-outline-primary" (click)="addProperty()">
                <i class="fa fa-fw fa-plus mr-1"></i>
                Property
              </button>
            </div>
            <!-- END PROPERTY LIST -->
  
            <!-- ACTIVE PROPERTY CONTENT -->
            <div *ngIf="activeProperty.length > 0" class="col-md-8">
  
              <app-property [propertiesById]="activeProperty" (propertyValueAdded)="addPropertyValue($event)" (propertyValueRemoved)="removePropertyValue($event)"></app-property>
              
            </div>
            <div *ngIf="activeProperty.length == 0" class="col-md-8">
              <div class="block block-rounded block-bordered block-rounded">
                <div class="block-header block-header-default">
                  <h3 class="block-title text-center"><small>No property selected</small></h3>
                </div>
              </div>
            </div>
            <!-- END ACTIVE PROPERTY CONTENT -->
          </ng-template>
          

        </div>
        <!-- END PROPERTIES CONTENT -->
      </div>
      <!-- END PROPERTIES TAB -->
    </div>
    <!-- END TABS -->
    <div id="testcasescript_modal_footer" class="row push">
      <div class="col-md-12 text-center">
        <button type="button" class="btn btn-info mr-1" (click)="saveTestCase()">
          <i class="fa fa-fw fa-check mr-1"></i> Save
        </button>
        <!-- 
        <button type="button" class="btn btn-secondary mr-1" (click)="debug()">
          <i class="fa fa-fw fa-bug mr-1"></i> Debug
        </button>
        -->
      </div>
    </div>
  </div>
</div>