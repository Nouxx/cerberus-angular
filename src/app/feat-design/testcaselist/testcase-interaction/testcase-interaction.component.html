<form *ngIf="testcaseHeaderForm" [formGroup]="testcaseHeaderForm" (ngSubmit)="onSubmit(testcaseHeaderForm.value)">
    <div class="block no-shadow">
        <div class="block-header block-header-default">

            <!-- SIDE CONTENT TITLE -->
            <h3 class="block-title" [ngSwitch]="_mode">
                <span *ngSwitchCase="'CREATE'">Create Test Case</span>
                <span *ngSwitchCase="'EDIT'">Edit Test Case Header</span>
                <span *ngSwitchCase="'DUPLICATE'">Duplicate Test Case</span>
            </h3>
            <!-- END SIDE CONTENT TITLE -->

            <!-- SAVE / CLOSE BUTTON -->
            <div class="block-options">
                <button type="button" class="btn btn-sm btn-primary mr-1" type="submit">{{saveButtonTitle}}</button>
                <button type="button" class="btn btn-sm btn-secondary" (click)="closeSideContent()">Close</button>
            </div>
            <!-- END SAVE / CLOSE BUTTON -->

        </div>
        <div class="block-content">
            <!-- TEST FOLDER & TESTCASE FOLDER -->
            <div class="row">

                <!-- TEST FOLDER SECTION -->
                <div id="sideContent_TestFolder" class="col-md-6">
                    <div class="form-group">
                        <label for="TestFolder">
                            Test Folder
                            <i class="fa fa-info-circle ml-0 info" placement="bottom"
                                ngbPopover="A test is a transversal grouping of Test Cases." popoverTitle="Test Folder"
                                triggers="mouseenter:mouseleave"></i>
                        </label>
                        <ng-select name="TestFolder" class="custom-sm" [items]="testsList" bindLabel="test"
                            bindValue="test" formControlName="test" placeholder="Select a Test">
                            <ng-template ng-label-tmp let-item="item">
                                {{item.test}} : {{item.description}}
                            </ng-template>
                            <ng-template ng-option-tmp let-item="item">
                                {{item.test}} : {{item.description}}
                            </ng-template>
                        </ng-select>
                    </div>
                </div>
                <!-- END TEST FOLDER SECTION -->

                <!-- TEST CASE SECTION -->
                <div id="sideContent_TestCase" class="col-md-6">
                    <div class="form-group">
                        <label for="TestCase">
                            Test Case
                            <i class="fa fa-info-circle ml-0 info" placement="bottom"
                                ngbPopover="A testcase is a unique identifier for your scenario along with the Test Folder"
                                popoverTitle="Test Case" triggers="mouseenter:mouseleave"></i>
                        </label>
                        <input type="text" class="form-control form-control-sm" name="TestCase" placeholder="Text Input"
                            formControlName="testCase">
                    </div>
                </div>
                <!-- END TEST CASE SECTION -->

            </div>

            <!-- TABS -->
            <div class="block block-rounded block-bordered">
                <ngb-tabset class="nav nav-tabs nav-tabs-alt js-tabs-enabled custom-sm">

                    <!-- DEFINITION TAB -->
                    <ngb-tab title="Definition" class="nav-item">
                        <ng-template ngbTabContent>
                            <div class="block-content tab-content">
                                <div class="row">

                                    <!-- SHORT DESCRIPTION -->
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label for="ShortDescription">Short Description</label>
                                            <input type="text" class="form-control form-control-sm"
                                                id="sideContent_ShortDescription" name="ShortDescription"
                                                placeholder="Test Case Short Description" formControlName="shortDesc">
                                        </div>
                                    </div>
                                    <!-- END SHORT DESCRIPTION -->

                                    <!-- APPLICATION -->
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="ShortDescription">Application</label>
                                            <ng-select name="Application" class="custom-sm" [items]="applicationsList"
                                                bindLabel="application" bindValue="application"
                                                formControlName="application" (change)="getFromSystem()"
                                                placeholder="You must define an application">
                                            </ng-select>
                                        </div>
                                    </div>
                                    <!-- END APPLICATION -->

                                    <!-- STATUS -->
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="Status">Status</label>
                                            <select class="form-control form-control-sm" formControlName="status">
                                                <option *ngFor="let status of statusList" [value]="status.value">
                                                    {{ status.value }}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                    <!-- END STATUS -->

                                    <!-- TYPE -->
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="Type">Type</label>
                                            <select class="form-control form-control-sm" formControlName="group">
                                                <option *ngFor="let type of typesList" [value]="type.value">
                                                    {{ type.value }}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                    <!-- END TYPE -->

                                    <!-- PRIORITY -->
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="Priority">Priority</label>
                                            <select class="form-control form-control-sm" formControlName="priority">
                                                <option *ngFor="let priority of priorityList" [value]="priority.value">
                                                    {{ priority.value }}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                    <!-- END PRIORITY -->

                                    <!-- FULL DESCRIPTION -->
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label for="FullDescription">Full Description</label>
                                            <ckeditor name="FullDescription" [editor]="Editor"
                                                formControlName="behaviorOrValueExpected">
                                            </ckeditor>
                                        </div>
                                    </div>
                                    <!-- END FULL DESCRIPTION -->

                                </div>
                            </div>
                        </ng-template>
                    </ngb-tab>
                    <!-- END DEFINITION TAB -->

                    <!-- SETTINGS TAB -->
                    <ngb-tab title="Settings" class="nav-item">
                        <ng-template ngbTabContent>
                            <div class="block-content tab-content">
                                <div class="row">
                                    <div class="col-md-12">

                                        <!-- ENVIRONMENT GROUP ACTIVATION -->
                                        <div id="sideContent_globalActivation" class="form-group">
                                            <label class="d-block">Environment Activation</label>
                                            <div class="custom-control custom-switch custom-control-inline">
                                                <input type="checkbox" id="globalActivation"
                                                    class="custom-control-input" name="globalActivation"
                                                    formControlName="active">
                                                <label class="custom-control-label" for="globalActivation">
                                                    Global
                                                    <i class="fa fa-info-circle ml-0 info" placement="bottom"
                                                        ngbPopover="This field define if the test is active or not. A test case that is not active cannot be executed."
                                                        popoverTitle="Global Activation"
                                                        triggers="mouseenter:mouseleave"></i>
                                                </label>
                                            </div>
                                            <div class="custom-control custom-switch custom-control-inline">
                                                <input type="checkbox" id="activeQA" class="custom-control-input"
                                                    name="activeQA" formControlName="activeQA">
                                                <label class="custom-control-label" for="activeQA">
                                                    QA
                                                    <i class="fa fa-info-circle ml-0 info" placement="bottom"
                                                        ngbPopover="This field define if the test is active or in the QA environment group."
                                                        popoverTitle="Active QA" triggers="mouseenter:mouseleave"></i>
                                                </label>
                                            </div>
                                            <div class="custom-control custom-switch custom-control-inline">
                                                <input type="checkbox" id="activeUAT" class="custom-control-input"
                                                    name="activeUAT" formControlName="activeUAT">
                                                <label class="custom-control-label" for="activeUAT">
                                                    UAT
                                                    <i class="fa fa-info-circle ml-0 info" placement="bottom"
                                                        ngbPopover="This field define if the test is active or in the UAT environment group."
                                                        popoverTitle="Active UAT" triggers="mouseenter:mouseleave"></i>
                                                </label>
                                            </div>
                                            <div class="custom-control custom-switch custom-control-inline">
                                                <input type="checkbox" id="activePROD" class="custom-control-input"
                                                    name="activePROD" formControlName="activePROD">
                                                <label class="custom-control-label" for="activePROD">
                                                    PROD
                                                    <i class="fa fa-info-circle ml-0 info" placement="bottom"
                                                        ngbPopover="This field define if the test is active or in the PROD environment group."
                                                        popoverTitle="Active PROD" triggers="mouseenter:mouseleave"></i>
                                                </label>
                                            </div>

                                        </div>
                                        <!-- END ENVIRONMENT GROUP ACTIVATION -->

                                        <!-- COUNTRY ACTIVATION -->
                                        <div class="form-group">
                                            <label class="d-block">Country Activation</label>
                                            <div *ngFor="let country of inv_countries"
                                                class="custom-control block custom-block custom-control-info custom-sm custom-control-inline">
                                                <input type="checkbox" class="custom-control-input" [id]="country.value"
                                                    [name]="country.value"
                                                    [checked]="isTheCountrySelected(country.value)"
                                                    (click)="toggleCountry(country.value)">
                                                <label class="custom-control-label" [for]="country.value">
                                                    <span class="d-block text-center">
                                                        {{ country.value }}
                                                    </span>
                                                </label>
                                            </div>
                                        </div>
                                        <!-- END COUNTRY ACTIVATION -->

                                        <!-- VERSION ACTIVATION -->
                                        <div class="form-group mb-0">
                                            <label class="d-block">Version Activation</label>
                                        </div>
                                        <div class="row">

                                            <div class="col-4">

                                                <!-- FROM SPRINT -->
                                                <div class="form-group custom-form-group-sm">
                                                    <label for="fromSprint" class="fw-400">From Sprint</label>
                                                    <select class="form-control form-control-sm"
                                                        formControlName="fromSprint" name="fromSprint">
                                                        <option *ngFor="let sprint of sprintsList"
                                                            [value]="sprint.versionName">
                                                            {{ sprint.versionName }}
                                                        </option>
                                                    </select>
                                                </div>
                                                <!-- END FROM SPRINT -->

                                                <!-- TO SPRINT -->
                                                <div class="form-group custom-form-group-sm">
                                                    <label for="example-select" class="fw-400">To Sprint</label>
                                                    <select class="form-control form-control-sm"
                                                        formControlName="toSprint" name="toSprint">
                                                        <option *ngFor="let sprint of sprintsList"
                                                            [value]="sprint.versionName">
                                                            {{ sprint.versionName }}
                                                        </option>
                                                    </select>
                                                </div>
                                                <!-- END TO SPRINT -->
                                            </div>

                                            <div class="col-4">

                                                <!-- FROM REV -->
                                                <div class="form-group custom-form-group-sm">
                                                    <label for="fromRev" class="fw-400">From Rev</label>
                                                    <select class="form-control form-control-sm"
                                                        formControlName="fromRev" name="fromRev">
                                                        <option *ngFor="let rev of revsList" [value]="rev.versionName">
                                                            {{ rev.versionName }}
                                                        </option>
                                                    </select>
                                                </div>
                                                <!-- END FROM REV -->

                                                <!-- TO REV -->
                                                <div class="form-group custom-form-group-sm">
                                                    <label for="toRev" class="fw-400">To Rev</label>
                                                    <select class="form-control form-control-sm" formControlName="toRev"
                                                        name="toRev">
                                                        <option *ngFor="let rev of revsList" [value]="rev.versionName">
                                                            {{ rev.versionName }}
                                                        </option>
                                                    </select>
                                                </div>
                                                <!-- END TO REV -->
                                            </div>

                                            <div class="col-4">

                                                <!-- TARGET SPRINT -->
                                                <div class="form-group custom-form-group-sm">
                                                    <label for="targetSprint" class="fw-400">Target Sprint</label>
                                                    <select class="form-control form-control-sm"
                                                        formControlName="targetSprint" name="targetSprint">
                                                        <option *ngFor="let sprint of sprintsList"
                                                            [value]="sprint.versionName">
                                                            {{ sprint.versionName }}
                                                        </option>
                                                    </select>
                                                </div>
                                                <!-- END TARGET SPRINT -->

                                                <!-- TARGET REV -->
                                                <div class="form-group custom-form-group-sm">
                                                    <label for="targetRev" class="fw-400">Target Sprint</label>
                                                    <select class="form-control form-control-sm"
                                                        formControlName="targetRev" name="targetRev">
                                                        <option *ngFor="let rev of revsList" [value]="rev.versionName">
                                                            {{ rev.versionName }}
                                                        </option>
                                                    </select>
                                                </div>
                                                <!-- END TARGET REV -->
                                            </div>

                                        </div>
                                        <!-- END VERSION ACTIVATION -->

                                        <!-- CONDITION ACTIVATION -->
                                        <div class="form-group mb-0">
                                            <label class="d-block">Condition Activation</label>
                                        </div>
                                        <div class="row">

                                            <div class="col-4">

                                                <!-- CONDITION OPER -->
                                                <div class="form-group">
                                                    <label for="example-select" class="fw-400">Condition</label>
                                                    <select class="form-control form-control-sm"
                                                        formControlName="conditionOper">
                                                        <option *ngFor="let condition of conditionOperList"
                                                            [value]="condition.value">
                                                            {{ condition.value }}
                                                        </option>
                                                    </select>
                                                </div>
                                                <!-- END CONDITION OPER  -->

                                            </div>

                                            <div class="col-4"
                                                *ngIf="hasConditionCrossReference(testcaseHeaderForm.get('conditionOper').value)">

                                                <!-- CONDITION VAL 1 -->
                                                <div class="form-group"
                                                    *ngIf="findConditionCrossReference(testcaseHeaderForm.get('conditionOper').value).value1">
                                                    <label for="ConditionValue1" class="fw-400">
                                                        {{ findConditionCrossReference(testcaseHeaderForm.get('conditionOper').value).value1 }}
                                                    </label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="ConditionValue1" formControlName="conditionVal1">
                                                </div>
                                                <!-- END CONDITION VAL 1 -->

                                            </div>

                                            <div class="col-4"
                                                *ngIf="hasConditionCrossReference(testcaseHeaderForm.get('conditionOper').value)">

                                                <!-- CONDITION VAL 2 -->
                                                <div class="form-group"
                                                    *ngIf="findConditionCrossReference(testcaseHeaderForm.get('conditionOper').value).value2">
                                                    <label for="ConditionValue2" class="fw-400">
                                                        {{ findConditionCrossReference(testcaseHeaderForm.get('conditionOper').value).value2 }}
                                                    </label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="ConditionValue2" formControlName="conditionVal2">
                                                </div>
                                                <!-- END CONDITION VAL 2 -->
                                            </div>

                                        </div>
                                        <!-- END CONDITION ACTIVATION -->

                                        <!-- ROBOT CONSTRAINTS -->
                                        <div class="form-group mb-0">
                                            <label class="d-block">Robot Constraints</label>
                                        </div>
                                        <div class="row">

                                            <div class="col-6">

                                                <!-- USER AGENT -->
                                                <div class="form-group">
                                                    <label for="userAgent" class="fw-400">User Agent</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="userAgent" formControlName="userAgent">
                                                </div>
                                                <!-- END USER AGENT -->

                                            </div>

                                            <div class="col-6">

                                                <!-- USER AGENT -->
                                                <div class="form-group">
                                                    <label for="screenSize" class="fw-400">Screen Size</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        name="screenSize" formControlName="screenSize">
                                                </div>
                                                <!-- END USER AGENT -->

                                            </div>
                                        </div>
                                        <!-- END ROBOT CONSTRAINTS -->


                                        <!-- <div class="form-group row">
                                            <label class="col-12 d-block">Version Activation</label>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="testcase">Sprint</label>
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                From
                                                            </span>
                                                        </div>
                                                        <select class="form-control br-tp-0" id="fromSprint"
                                                            name="fromSprint" [(ngModel)]="testcaseheader.fromBuild"
                                                            *ngIf="isThereAnySprintDefined">
                                                            <option *ngFor="let sprint of sprints"
                                                                [value]="sprint.versionName">
                                                                {{ sprint.versionName }}
                                                            </option>
                                                        </select>
                                                        <input *ngIf="!isThereAnySprintDefined" type="text"
                                                            class="form-control br-tp-0" id="fromSprint"
                                                            name="fromSprint" value="There is no sprint defined."
                                                            disabled>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                To
                                                            </span>
                                                        </div>
                                                        <select class="form-control br-tp-0" id="toSprint"
                                                            name="toSprint" [(ngModel)]="testcaseheader.toBuild"
                                                            *ngIf="isThereAnySprintDefined">
                                                            <option *ngFor="let sprint of sprints"
                                                                [value]="sprint.versionName">
                                                                {{ sprint.versionName }}
                                                            </option>
                                                        </select>
                                                        <input *ngIf="!isThereAnySprintDefined" type="text"
                                                            class="form-control br-tp-0" id="toSprint" name="toSprint"
                                                            value="There is no sprint defined." disabled>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="testcase">Revision</label>
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                From
                                                            </span>
                                                        </div>
                                                        <select class="form-control br-tp-0" id="fromRev" name="fromRev"
                                                            [(ngModel)]="testcaseheader.fromRev"
                                                            *ngIf="isThereAnyRevDefined">
                                                            <option *ngFor="let rev of revs" [value]="rev.versionName">
                                                                {{ rev.versionName }}
                                                            </option>
                                                        </select>
                                                        <input *ngIf="!isThereAnyRevDefined" type="text"
                                                            class="form-control br-tp-0" id="fromRev" name="fromRev"
                                                            value="There is no rev defined." disabled>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                To
                                                            </span>
                                                        </div>

                                                        <select class="form-control br-tp-0" id="toRev" name="toRev"
                                                            [(ngModel)]="testcaseheader.toRev"
                                                            *ngIf="isThereAnyRevDefined">
                                                            <option *ngFor="let rev of revs" [value]="rev.versionName">
                                                                {{ rev.versionName }}
                                                            </option>
                                                        </select>
                                                        <input *ngIf="!isThereAnyRevDefined" type="text"
                                                            class="form-control br-tp-0" id="toRev" name="toRev"
                                                            value="There is no rev defined." disabled>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="testcase">Target <i
                                                            class="fa fa-info-circle ml-0"></i></label>
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                Sprint
                                                            </span>
                                                        </div>
                                                        <select class="form-control br-tp-0" id="targetBuild"
                                                            name="targetBuild" [(ngModel)]="testcaseheader.targetBuild"
                                                            *ngIf="isThereAnySprintDefined">
                                                            <option *ngFor="let sprint of sprints"
                                                                [value]="sprint.versionName">
                                                                {{ sprint.versionName }}
                                                            </option>
                                                        </select>
                                                        <input *ngIf="!isThereAnySprintDefined" type="text"
                                                            class="form-control br-tp-0" id="targetBuild"
                                                            name="targetBuild" value="There is no sprint defined."
                                                            disabled>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                Revision
                                                            </span>
                                                        </div>
                                                        <select class="form-control br-tp-0" id="targetRev"
                                                            name="targetRev" [(ngModel)]="testcaseheader.targetRev"
                                                            *ngIf="isThereAnyRevDefined">
                                                            <option *ngFor="let rev of revs" [value]="rev.versionName">
                                                                {{ rev.versionName }}
                                                            </option>
                                                        </select>
                                                        <input *ngIf="!isThereAnyRevDefined" type="text"
                                                            class="form-control br-tp-0" id="targetRev" name="targetRev"
                                                            value="There is no rev defined." disabled>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group row">
                                            <label class="col-12 d-block">Conditionnal Activation</label>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                Condition
                                                            </span>
                                                        </div>
                                                        <select class="form-control br-tp-0" id="conditionOper"
                                                            name="conditionOper"
                                                            [(ngModel)]="testcaseheader.conditionOper">
                                                            <option *ngFor='let condition of inv_condition_oper'
                                                                [(ngValue)]='condition.value'>{{condition.value}} -
                                                                {{condition.description}}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                Value 1
                                                            </span>
                                                        </div>
                                                        <input type="text" class="form-control br-tp-0"
                                                            id="conditionVal1" name="conditionVal1"
                                                            [(ngModel)]='testcaseheader.conditionVal1'>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                Value 2
                                                            </span>
                                                        </div>
                                                        <input type="text" class="form-control br-tp-0"
                                                            id="conditionVal2" name="conditionVal2"
                                                            [(ngModel)]='testcaseheader.conditionVal2'>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group row">
                                            <label class="col-12 d-block">Robots Contraints</label>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="testcase">User Agent</label>
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <i class="far fa-user"></i>
                                                            </span>
                                                        </div>

                                                        <input type="text" class="form-control br-tp-0" id="userAgent"
                                                            name="userAgent" [(ngModel)]='testcaseheader.userAgent'>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="testcase">Screen Size</label>
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <i class="far fa-object-ungroup"></i>
                                                            </span>
                                                        </div>
        
                                                        <input type="text" class="form-control br-tp-0" id="screenSize"
                                                            name="screenSize" [(ngModel)]='testcaseheader.screenSize'>
                                                    </div>
                                                </div>
                                            </div>
                                        </div> -->

                                    </div>
                                </div>
                            </div>
                        </ng-template>
                    </ngb-tab>
                    <!-- END SETTINGS TAB -->

                    <!-- LABELS TAB-->
                    <ngb-tab title="Labels" class="nav-item">
                        <ng-template ngbTabContent>
                            <div class="block-content tab-content">
                                <app-labels-tab [test]="test" [testcase]="testcase" [system]="testcaseheader.system"></app-labels-tab>
                            </div>
                        </ng-template>
                    </ngb-tab>
                    <!-- END LABELS TAB-->

                    <ngb-tab title="Bug Report" class="nav-item">
                        <ng-template ngbTabContent>
                            <div class="block-content tab-content">
                                <div class="row">
                                </div>
                            </div>
                        </ng-template>
                    </ngb-tab>

                    <ngb-tab title="Dependency" class="nav-item">
                        <ng-template ngbTabContent>
                            <div class="block-content tab-content">
                                <div class="row">
                                </div>
                            </div>
                        </ng-template>
                    </ngb-tab>

                    <ngb-tab title="Tracability" class="nav-item">
                        <ng-template ngbTabContent>
                            <div class="block-content tab-content">
                                <div class="row">
                                </div>
                            </div>
                        </ng-template>
                    </ngb-tab>

                </ngb-tabset>

                <!-- OLD VERSION -->

                <!-- <ul class="nav nav-tabs nav-tabs-alt js-tabs-enabled" data-toggle="tabs" role="tablist">

                    <li class="nav-item">
                        <a class="nav-link" [ngClass]="{'active': paneActive===1}"
                            (click)="paneActive = 1">Definition</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" [ngClass]="{'active': paneActive===2}" (click)="paneActive = 2">Execution
                            Settings</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" [ngClass]="{'active': paneActive===3}" (click)="paneActive = 3">Label</a>
                    </li>
                    <li class="nav-item">
                        <a class=" nav-link" [ngClass]="{'active': paneActive===4}" (click)="paneActive = 4">Bug
                            Report</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" [ngClass]="{'active': paneActive===5}"
                            (click)="paneActive = 5">Dependency</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" [ngClass]="{'active': paneActive===6}"
                            (click)="paneActive = 6">Tracability</a>
                    </li>
                </ul>


                <div class="block-content tab-content">

                    <div class="tab-pane" [ngClass]="{'active': paneActive===1}" role="tabpanel">
                        <div class="row">

                            <div class="col-md-12">
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">Test case short description</span>
                                    </div>
                                    <textarea class="form-control" formControlName="shortDesc"></textarea>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">Application</span>
                                    </div>
                                    <select class="form-control" formControlName="application"
                                        (change)="getFromSystem()">
                                        <option value=""></option>
                                        <option *ngFor="let application of applicationsList"
                                            [value]="application.application">
                                            {{ application.application }}</option>
                                    </select>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">Status</span>
                                    </div>
                                    <select class="form-control" formControlName="status">
                                        <option *ngFor="let status of statusList" [value]="status.value">
                                            {{ status.value }}
                                        </option>
                                    </select>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">Type</span>
                                    </div>
                                    <select class="form-control" formControlName="group">
                                        <option *ngFor="let type of typesList" [value]="type.value">{{ type.value }}
                                        </option>
                                    </select>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">Priority</span>
                                    </div>
                                    <select class="form-control" formControlName="priority">
                                        <option *ngFor="let priority of priorityList" [value]="priority.value">
                                            {{ priority.value }}</option>
                                    </select>
                                </div>
                            </div>

                            <div class="col-md-12">
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">Detailed Description / Value Expected </span>
                                    </div>
                                    <textarea class="form-control"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>




                    <div class="tab-pane" [ngClass]="{'active': paneActive===2}" role="tabpanel">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">Global Activation</span>
                                    </div>
                                    <select class="form-control" formControlName="active">
                                        <option *ngFor="let boolean of booleanList" [value]="boolean.value">
                                            {{ boolean.text }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">Active QA</span>
                                    </div>
                                    <select class="form-control" formControlName="activeQA">
                                        <option *ngFor="let boolean of booleanList" [value]="boolean.value">
                                            {{ boolean.text }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">Active UAT</span>
                                    </div>
                                    <select class="form-control" formControlName="activeUAT">
                                        <option *ngFor="let boolean of booleanList" [value]="boolean.value">
                                            {{ boolean.text }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">Active PROD</span>
                                    </div>
                                    <select class="form-control" formControlName="activeProd">
                                        <option *ngFor="let boolean of booleanList" [value]="boolean.value">
                                            {{ boolean.text }}
                                        </option>
                                    </select>
                                </div>
                            </div>

                            <div class="col-md-12">
                                <div class="block block-rounded block-bordered">
                                    Countries
                                </div>
                            </div>

                            <div class="block block-rounded block-bordered">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="input-group mb-3">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">From Sprint</span>
                                            </div>
                                            <select class="form-control" formControlName="fromSprint">
                                                <option *ngFor="let sprint of sprintsList" [value]="sprint.versionName">
                                                    {{ sprint.versionName }}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="input-group mb-3">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">From Rev</span>
                                            </div>
                                            <select class="form-control" formControlName="fromRev">
                                                <option *ngFor="let rev of revsList" [value]="rev.versionName">
                                                    {{ rev.versionName }}
                                                </option>
                                            </select>
                                        </div>

                                    </div>
                                    <div class="col-md-6">
                                        <div class="input-group mb-3">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">To Sprint</span>
                                            </div>
                                            <select class="form-control" formControlName="toSprint">
                                                <option *ngFor="let sprint of sprintsList" [value]="sprint.versionName">
                                                    {{ sprint.versionName }}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="input-group mb-3">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">To Rev</span>
                                            </div>
                                            <select class="form-control" formControlName="toRev">
                                                <option *ngFor="let rev of revsList" [value]="rev.versionName">
                                                    {{ rev.versionName }}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="input-group mb-3">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">Target Sprint</span>
                                            </div>
                                            <select class="form-control" formControlName="targetSprint">
                                                <option *ngFor="let sprint of sprintsList" [value]="sprint.versionName">
                                                    {{ sprint.versionName }}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="input-group mb-3">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">Target Rev</span>
                                            </div>
                                            <select class="form-control" formControlName="targetRev">
                                                <option *ngFor="let rev of revsList" [value]="rev.versionName">
                                                    {{ rev.versionName }}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="block block-rounded block-bordered">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="input-group mb-3">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">Condition Operator</span>
                                            </div>
                                            <select class="form-control" formControlName="conditionOper">
                                                <option *ngFor="let condition of conditionsList"
                                                    [value]="condition.value">
                                                    {{ condition.value }}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="input-group mb-3">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">Condition Value 1</span>
                                            </div>
                                            <input type="text" class="form-control" formControlName="conditionVal1">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="input-group mb-3">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">Condition Value 2</span>
                                            </div>
                                            <input type="text" class="form-control" formControlName="conditionVal2">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="block block-rounded">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="input-group mb-3">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">User Agent</span>
                                            </div>
                                            <input type="text" class="form-control" formControlName="userAgent">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="input-group mb-3">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">Screen Size</span>
                                            </div>
                                            <input type="text" class="form-control" formControlName="screenSize">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="tab-pane" [ngClass]="{'active': paneActive===3}" role="tabpanel">
                        <div class="block block-rounded block-bordered">
                            <ul class="nav nav-tabs nav-tabs-alt js-tabs-enabled" data-toggle="tabs" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link" [ngClass]="{'active': labelTab===1}"
                                        (click)="labelTab = 1">Batteries</a>
                                </li>

                                <li class="nav-item">
                                    <a class="nav-link" [ngClass]="{'active': labelTab===2}"
                                        (click)="labelTab = 2">Requirements</a>
                                </li>

                                <li class="nav-item">
                                    <a class="nav-link" [ngClass]="{'active': labelTab===3}"
                                        (click)="labelTab = 3">Stickers</a>
                                </li>
                            </ul>

                            <div class="block-content tab-content">
                                <div class="tab-pane" [ngClass]="{'active': labelTab===1}" role="tabpanel"
                                    *ngIf="labelList">
                                    <ul class="list-group">
                                        <li class="list-group-item" *ngFor="let label of labelList.batteries"
                                            [ngClass]="{'active' :label.state.selected}" (click)="toggleLabel(label)">
                                            <span class="badge badge-primary"
                                                [style.background-color]="label.label.color">{{ label.label.label }}</span>
                                        </li>
                                    </ul>
                                </div>
                                <div class="tab-pane" [ngClass]="{'active': labelTab===2}" role="tabpanel"
                                    *ngIf="labelList">
                                    <ul class="list-group">
                                        <li class="list-group-item" *ngFor="let label of labelList.requirements"
                                            [ngClass]="{'active' : label.state.selected}" (click)="toggleLabel(label)">
                                            <span class="badge badge-primary"
                                                [style.background-color]="label.label.color">{{ label.label.label }}</span>
                                        </li>
                                    </ul>

                                </div>
                                <div class="tab-pane" [ngClass]="{'active': labelTab===3}" role="tabpanel"
                                    *ngIf="labelList">
                                    <ul class="list-group">
                                        <li class="list-group-item" *ngFor="let label of labelList.stickers"
                                            [ngClass]="{'active' : label.state.selected}" (click)="toggleLabel(label)">
                                            <span class="badge badge-primary"
                                                [style.background-color]="label.label.color">{{ label.label.label }}</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="tab-pane" [ngClass]="{'active': paneActive===4}" role="tabpanel">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">Bug ID</span>
                                    </div>
                                    <input type="text" class="form-control" formControlName="bugId">
                                </div>
                            </div>
                            <div class="col-md-8">Bug Link</div>
                            <div class="col-md-12">
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">Comment</span>
                                    </div>
                                    <textarea class="form-control" formControlName="comment"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="tab-pane" [ngClass]="{'active': paneActive===5}" role="tabpanel">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">Select a Test</span>
                                    </div>
                                    <select class="form-control" (change)="onTestChange($event.target.value)">
                                        <option value="">---</option>
                                        <option *ngFor="let test of testsList" [value]="test.test">
                                            {{ test.test }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <div *ngIf="testcaseList.length>0" class="col-md-6">
                                <select class="form-control" (change)="onTestCaseChange($event.target.value)">
                                    <option value="">---</option>
                                    <option *ngFor="let testcase of testcaseList; let index = index" [value]="index">
                                        {{ testcase.testCase }}
                                    </option>
                                </select>
                            </div>
                            <button type="button" *ngIf="dependencySelectedTestCase"
                                (click)="addToDependencyTable(dependencySelectedTestCase)"
                                class="btn btn-info col-md-12">Add
                                test case</button>
                            <div class="col-md-12">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Actions</th>
                                            <th>Test Cases</th>
                                            <th>Activate</th>
                                            <th>Description</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let dependency of dependencyTestCaseList; let index = index">
                                            <td><button class="btn btn-danger" (click)="removeDependency(index)"><i
                                                        class="fa fa-trash"></i></button></td>
                                            <td>{{ dependency.test }} - {{ dependency.testcase }}</td>
                                            <td><input type="checkbox" name="activate" [(ngModel)]="dependency.active"
                                                    [ngModelOptions]="{standalone: true}"></td>
                                            <td><input type="text" name="description"
                                                    [(ngModel)]="dependency.description"
                                                    [ngModelOptions]="{standalone: true}"></td>
                                        </tr>
                                    </tbody>

                                </table>
                            </div>


                        </div>
                    </div>

                    <div class="tab-pane" [ngClass]="{'active': paneActive===6}" role="tabpanel">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">Implementers</span>
                                    </div>
                                    <input type="text" class="form-control" formControlName="implementer">
                                </div>
                            </div>
                            <div class="col-md-6 tracability-list-item">
                                <ul class="list-group list-group-horizontal">
                                    <li class="list-group-item bg-secondary text-light">Version</li>
                                    <li class="list-group-item">{{ testCase.testCaseVersion }}</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <ul class="list-group list-group-horizontal">
                                    <li class="list-group-item bg-secondary text-light">Creation Date</li>
                                    <li class="list-group-item">{{ testCase.dateCreated | date:'d MMMM y   HH:mm' }}
                                    </li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <ul class="list-group list-group-horizontal">
                                    <li class="list-group-item bg-secondary text-light">Created By</li>
                                    <li class="list-group-item">{{ testCase.usrCreated }}</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <ul class="list-group list-group-horizontal">
                                    <li class="list-group-item bg-secondary text-light">Modification Date</li>
                                    <li class="list-group-item">{{ testCase.dateModif | date:'d MMMM y   HH:mm' }}</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <ul class="list-group list-group-horizontal">
                                    <li class="list-group-item bg-secondary text-light">Modified by</li>
                                    <li class="list-group-item">{{ testCase.usrModif }}</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                </div> -->
            </div>

        </div>
    </div>
</form>